/*!
 * zzSLider v0.4 by Zzbaivong <http://devs.forumvi.com>
 * Forked from Jlider v1.0 by Juskteez (vhuyphong@gmail.com)
 */
!function(e){"use strict";e.fn.zzslider=function(t){var n=e.extend({effect:"random",width:600,height:400,maxWidth:"100%",maxHeight:"100%",minWidth:200,minHeight:200,hideControl:"",playSpeed:3e3,autoPlay:!0,onPlay:function(){},onPause:function(){},onChange:function(){},onLoaded:function(){},onFullscreen:function(){},onExitfullscreen:function(){},helper:function(){}},t);return this.each(function(){var t=e(this),i=function(t,n){return e("<div>",{"class":"jlider_"+t,text:n})},l=i("wrap",""),a=i("control",""),r=i("pause","Pause"),s=i("full","Fullscreen"),c=i("next","Next"),o=i("prev","Prev"),u=i("paging",""),d=i("progress","");t.addClass("jlider_list").wrap('<div class="jlider_wrap"></div>');var l=t.parent();l.css({width:n.width,height:n.height,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:n.minHeight}),r.add(s).add(c).add(o).add(u).appendTo(a),a.add(d).insertBefore(t);var g,f=function(){d.animate({width:"100%"},n.playSpeed,"linear",function(){x(q(!0)),d.width(0),f()})},m=function(){d.stop(!0,!1),d.width(0),n.onPause.call(l,e("li.jactive > img",t))},v=function(){"Play"==r.text()&&(f(),n.onPlay.call(l,e("li.jactive > img",t)))},h=e("li",t),p=h.length,x=function(i){var a=n.effect,r="left right up down zoomIn zoomOut skewLeft skewRight skewUp skewDown rotateLeft rotateRight";t.removeClass("zz"+r.split(" ").join(" zz")),("random"==a||-1!==a.indexOf(" "))&&("random"==a&&(a=r),a=a.split(" ")[Math.floor(Math.random()*a.split(" ").length)]),t.addClass("zz"+a),setTimeout(function(){e(".jactive",t).add(e(".jactive",u)).removeClass("jactive"),h.eq(i).add(g.eq(i)).addClass("jactive"),c.attr("data-img",e("img",t).eq(i+1).attr("src")),o.attr("data-img",e("img",t).eq(i-1).attr("src")),n.onChange.call(l,e("li.jactive > img",t))},100)};d.css({height:"100%",width:"100%",background:"rgba(0, 0, 0, 0.69)"});var w=e("<div>",{"class":"jlider_percent",text:"0%"}).appendTo(l),z=1,F=function(i){var a=Math.round(i/p*100);d.animate({height:100-a+"%"},70,"linear",function(){x(i),w.text(a+"%"),i===p&&(d.removeAttr("style"),w.addClass("zz100").fadeOut(200,function(){n.autoPlay&&(r.text("Play").addClass("jlider_play"),v()),l.hover(function(){l.hasClass("zzfullscreen")||l.hasClass("zzfullwindow")||m()},function(){v()}),w.remove(),x(0),u.css("bottom",0),n.onLoaded.call(l,e("img",t).first())}))})};h.each(function(t){var i=e("img",this);i[0].complete?F(z++):i.load(function(){F(z++)}).error(function(){F(z++)}),u.append(e("<div>",{"class":"zzpage","data-index":t,"data-img":i.attr("src"),html:"<span>"+(t+1)+"</span>"}))}),g=e(".zzpage",u);var j=l.width(),C=p*g.outerWidth(!0),y=C/2;if(u.css({width:C,marginLeft:-y+"px"}),C>j){C+=100,y=C/2,u.css({marginLeft:-y+"px",paddingLeft:50,paddingRight:50});var P,E,k=y-j/2;u.hover(function(e){P=e.pageX,E=P-l.offset().left},function(){u.animate({marginLeft:-y+"px"},100)}).mousemove(function(e){if(u.width()>l.width()){var t=P-e.pageX;t>0?u.css("marginLeft",-(y-t*k/E)+"px"):0>t&&u.css("marginLeft",-y+t*k/(j-E)+"px")}})}var q=function(t){var i,n=parseInt(e(".jactive",u).data("index"),10);return t?(i=n+1,i==p&&(i=0)):(i=n-1,-1==i&&(i=p-1)),i};c.click(function(){x(q(!0))}),o.click(function(){x(q())}),g.click(function(){x(parseInt(e(this).data("index"),10))}),r.click(function(){"Play"==r.text()?(r.text("Pause").removeClass("jlider_play"),m()):(r.text("Play").addClass("jlider_play"),v())});var S=n.hideControl;S&&""!==S.match(/\s*(.*)\s*/)[1]&&e.each(S.split(" "),function(e,t){/\b(play|pause|next|prev|paging|full|progress)\b/.test(t)&&("play"==t&&(t="pause"),l.find(".jlider_"+t).hide())});var b=function(e){e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullScreen&&e.webkitRequestFullScreen()},R=function(){document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen()},_=function(){"Play"==r.text()&&v(),c.add(o).add(u).hover(function(){m()},function(){v()}),n.onFullscreen.call(l,e("li.jactive > img",t))};s.click(function(){void 0===document.msFullscreenElement&&void 0===document.fullscreenElement&&void 0===document.mozFullScreenElement&&void 0===document.webkitFullscreenElement?l.toggleClass(function(){return l.hasClass("zzfullwindow")?_():n.onExitfullscreen.call(l,e("li.jactive > img",t)),"zzfullwindow"}):document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?(R(),n.onExitfullscreen.call(l,e("li.jactive > img",t))):(b(l[0]),_())}),n.helper.call(l,{temp:{control:{play:r,full:s,next:c,prev:o,paging:g},progress:d,list:h}},n)})}}(jQuery);